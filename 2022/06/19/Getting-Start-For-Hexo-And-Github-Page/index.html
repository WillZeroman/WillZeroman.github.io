<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>Getting Start For Hexo And Github Page | Will&#39;s Blog For Tech</title>
  <meta name="author" content="Will">
  
  <meta name="description" content="记录与分享技术">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Getting Start For Hexo And Github Page"/>
  <meta property="og:site_name" content="Will&#39;s Blog For Tech"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Will&#39;s Blog For Tech</a></h1>
  <h2><a href="/">The Blog For Computer Science And Tech</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/null">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-Getting-Start-For-Hexo-And-Github-Page" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2022-06-19T12:24:18.000Z"><a href="/2022/06/19/Getting-Start-For-Hexo-And-Github-Page/">2022-06-19</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">Getting Start For Hexo And Github Page</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>从零开始搭建个人技术博客，用于记录与分享。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>所需技能：</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://nodejs.cn/">node.js</a>：目前的版本数 <code>v16</code>，本次用于安装hexo。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://git-scm.com/">git</a>：版本管理工具，本次用于上传代码到github。</p>
</li>
</ul>
<p>有了以上两个工具，再加上掌握markdown写作语法，就可以开始搭建并写作了。</p>
<h2 id="Hexo-第一篇文章"><a href="#Hexo-第一篇文章" class="headerlink" title="Hexo 第一篇文章"></a>Hexo 第一篇文章</h2><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><ol>
<li>使用 npm 命令安装 Hexo</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装完后，使用 hexo 命令建立博客，可以指定文件夹。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>执行以下命令，本地部署，</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>启动后访问 <code>http://localhost:4000</code>，效果如下：<br><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f801a1c96d84a9cac03b7d301f68a1d~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h3 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h3><p>新建文章之前，修改 <code>_config.xml</code>中的配置，修改创建文章的名称，增加年月日标识。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_post_name: :year-:month-:day-:title.md</span><br></pre></td></tr></table></figure>
<p>新建文章</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;Getting Start For Hexo And Github Page&quot;</span></span><br></pre></td></tr></table></figure>
<p>会在<code>source/_posts</code>中新创建一个名为 “2022-06-19-Getting-Start-For-Hexo-And-Github-Page.md”的文件，编辑即可写文章。</p>
<h2 id="Gitbub-Pages-部署"><a href="#Gitbub-Pages-部署" class="headerlink" title="Gitbub Pages 部署"></a>Gitbub Pages 部署</h2><p>使用Github Action 做自动化部署。</p>
<ol>
<li>在Github中创建一个公开仓库，根据自己的 <strong>username</strong> 命名，格式为 <strong><em>username</em>.github.io</strong></li>
<li>将上一个段落创建的 hexo 目录推送到仓库中，分支为默认分支 <strong>main</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin xxx</span><br><span class="line">git checkout main</span><br><span class="line">git add .</span><br><span class="line">git commit -am <span class="string">&quot;init hexo&quot;</span></span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>在目录下创建文件 <code>.github/workflows/pages.yml</code>，然后填入以下内容</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Pages</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span>  <span class="comment"># default branch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">pages:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span>        <span class="comment"># 拉取submodule模块</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">16.</span><span class="string">x</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;16&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">NPM</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.OS</span> <span class="string">&#125;&#125;-npm-cache</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>保存，将以上内容推送到仓库中，当部署完成后，生成的页面会在<code>gh-pages</code>分支中。</p>
<ol start="4">
<li>修改Github Pages配置，在 Github 仓库的 <strong>Settings</strong> &gt; <strong>Pages</strong> &gt; <strong>Source</strong>中，修改分支为<code>gh-pages</code></li>
<li>在 <strong>Actions</strong> 中检查是否部署成功<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ea533fc39e2481e9a4b7908cbfee5bb~tplv-k3u1fbpfcp-watermark.image" alt="image.png"><br>部署成功后，访问网页 <em>username</em>.github.io</li>
</ol>
<h2 id="踩到的坑"><a href="#踩到的坑" class="headerlink" title="踩到的坑"></a>踩到的坑</h2><h3 id="Github中的持续集成，没有使用-Travis-CI，使用Github-Action"><a href="#Github中的持续集成，没有使用-Travis-CI，使用Github-Action" class="headerlink" title="Github中的持续集成，没有使用 Travis CI，使用Github Action"></a>Github中的持续集成，没有使用 Travis CI，使用Github Action</h3><p>由于<a target="_blank" rel="noopener" href="https://travis-ci.com/">Travis CI</a>目前已全面收费，新用户只能免费使用30天，如果使用Travis CI需要认证用户信息，并购买服务后才能使用。<br>Github Actions是Github的免费持续集成工具，符合当前建站要求。</p>
<p>因此最新版本的hexo建站，可以使用 Github Action。</p>
<h3 id="部署成功后，访问页面内容为空"><a href="#部署成功后，访问页面内容为空" class="headerlink" title="部署成功后，访问页面内容为空"></a>部署成功后，访问页面内容为空</h3><p><strong>现象：</strong></p>
<ol>
<li>页面访问成功，但是页面为空。不显示文章。</li>
<li>查看Github Actions的运用的 <code>build</code> 任务时，出现WARN日志。</li>
</ol>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa5268773cb64f3ea9556ddd95834856~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>原因：</strong><br>在持续集成的时候，拉取仓库代码后，没有拉去到对应的 submodule 的代码，导致 theme 主题下的目录为空。在后面执行<code>hexo generate</code>的时候，生成的 index.html 页面文件都是空的。</p>
<p><strong>解决办法</strong>：<br>在 <code>pages.yml</code> 中，第一步 <code>checkout</code>增加配置 <code>submodules: true </code> 用于拉去submodule的源代码。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>hexo <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">中文</a>、<a target="_blank" rel="noopener" href="https://hexo.io/docs/index.html">英文</a>： 推荐看英文，中文翻译比较老旧。</li>
<li>Github Actions <a target="_blank" rel="noopener" href="https://docs.github.com/cn/actions/learn-github-actions/understanding-github-actions">中文</a>：对 Actions 有个初步的了解。</li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/%E5%9F%BA%E7%A1%80/">基础</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/%E5%9F%BA%E7%A1%80/">基础</a>, <a href="/tags/Hexo/">Hexo</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://example.com/2022/06/19/Getting-Start-For-Hexo-And-Github-Page/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="as_sitesearch" value="example.com">
  </form>
</div>


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/%E5%9F%BA%E7%A1%80/">基础</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Hexo/">Hexo</a><small>1</small></li>
  
    <li><a href="/tags/%E5%9F%BA%E7%A1%80/">基础</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2022 Will
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
